"use strict";(self.webpackChunkjiru_webapp=self.webpackChunkjiru_webapp||[]).push([[584],{50584:function(r,o,e){e.r(o),e.d(o,{UsuarioModule:function(){return C}});var i=e(12057),t=e(23738),a=e(37911),n=e(23419),s=e(6282),c=e(95859),l=e(88002),u=e(92340),d=e(60793),m=e(58497);let f=(()=>{class r{constructor(r){this._httpClient=r,this.crearUsuario=r=>this._httpClient.post(`${this.apiUrl}/usuario/${r.rol.toLowerCase()}`,r).pipe((0,l.U)(r=>r)),this.obtenerBugsResueltosPorUsuario=r=>this._httpClient.get(`${this.apiUrl}/bug/desarrollador/${r}/resuelto`).pipe((0,l.U)(r=>r)),this.apiUrl=u.N.apiUrl}}return r.\u0275fac=function(o){return new(o||r)(d.LFG(m.eN))},r.\u0275prov=d.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function p(r,o){if(1&r&&(d.TgZ(0,"div",31),d.TgZ(1,"alert",32),d._UZ(2,"i",33),d._uU(3),d.qZA(),d.qZA()),2&r){const r=o.$implicit;d.xp6(1),d.Q6J("type",r.tipo)("dismissible",r.cerrable),d.xp6(2),d.Oqu(r.mensaje)}}function g(r,o){1&r&&(d.TgZ(0,"div",34),d._uU(1," Ingresa un nombre v\xe1lido "),d.qZA())}function Z(r,o){1&r&&(d.TgZ(0,"div",34),d._uU(1," Ingresa un apellido v\xe1lido "),d.qZA())}function v(r,o){1&r&&(d.TgZ(0,"div",34),d._uU(1," Ingresa un nombre de usuario v\xe1lido "),d.qZA())}function U(r,o){1&r&&(d.TgZ(0,"div",34),d._uU(1," Ingresa un rol v\xe1lido "),d.qZA())}function b(r,o){1&r&&(d.TgZ(0,"div",34),d._uU(1," Ingresa un correo electr\xf3nico v\xe1lido "),d.qZA())}function h(r,o){1&r&&(d.TgZ(0,"div",34),d._uU(1," La contrase\xf1a debe tener al menos 6 caracteres "),d.qZA())}function A(r,o){1&r&&(d.TgZ(0,"div",34),d._uU(1," Las contrase\xf1as no coinciden "),d.qZA())}function q(r,o){1&r&&(d.TgZ(0,"div",34),d._uU(1," Ingresa un costo por hora mayor a 0 "),d.qZA())}function T(r,o){if(1&r&&(d.TgZ(0,"div",9),d.TgZ(1,"label",35),d._uU(2,"Costo por hora (*)"),d.qZA(),d._UZ(3,"input",36),d.YNc(4,q,2,0,"div",12),d.qZA()),2&r){const r=d.oxw();d.xp6(3),d.Tol(!r.formUsuario.controls.costoPorHora.valid&&r.formUsuario.controls.costoPorHora.dirty?"form-control is-invalid":"form-control"),d.xp6(1),d.Q6J("ngIf",!r.formUsuario.controls.costoPorHora.valid&&r.formUsuario.controls.costoPorHora.dirty&&"Administrador"!==r.formUsuario.controls.rol.value)}}function _(r,o){if(1&r&&(d.TgZ(0,"div",18),d.TgZ(1,"alert",19),d._UZ(2,"i",20),d._uU(3),d.qZA(),d.qZA()),2&r){const r=o.$implicit;d.xp6(1),d.Q6J("type",r.tipo)("dismissible",r.cerrable),d.xp6(2),d.Oqu(r.mensaje)}}function I(r,o){1&r&&(d.TgZ(0,"div",21),d._uU(1," Ingresa un correo electr\xf3nico v\xe1lido "),d.qZA())}const y=[{path:"",data:{title:"Usuario"},children:[{path:"crear",data:{title:"Crear"},component:(()=>{class r{constructor(r,o,e){this.route=r,this.router=o,this._usuarioService=e,this.formUsuario=new t.cw({nombre:new t.NI("",t.kI.required),apellido:new t.NI("",t.kI.required),costoPorHora:new t.NI("0"),correoElectronico:new t.NI("",[t.kI.required,t.kI.email]),nombreUsuario:new t.NI("",t.kI.required),contrasena:new t.NI("",[t.kI.required,t.kI.minLength(6)]),confirmarContrasena:new t.NI("",t.kI.required),rol:new t.NI("Administrador",[t.kI.required])}),this.subscripcionForm=this.formUsuario.valueChanges.subscribe(r=>{this.formUsuario.controls.confirmarContrasena.setErrors(r.contrasena!==r.confirmarContrasena?{mismatch:!0}:null),"Administrador"!==r.rol&&this.formUsuario.controls.rol.addValidators([t.kI.required,t.kI.min(1)])}),this.alertas=[]}ngOnDestroy(){this.subscripcionCrear&&this.subscripcionCrear.unsubscribe(),this.subscripcionForm&&this.subscripcionForm.unsubscribe()}enviarForm(){this.resetAlertas(),this.formUsuario.valid?this.subscripcionCrear=this._usuarioService.crearUsuario(this.formUsuario.value).subscribe(r=>{r.exito&&(201===r.codigoEstado||200===r.codigoEstado)&&(this.resetForm(!1),this.generarAlerta(r.mensaje,"exito"))},r=>{this.generarAlerta(r.error&&r.error.Mensaje?r.error.Mensaje:"Ha ocurrido un error inesperado","error")}):this.generarAlerta("Por favor, revisa los campos ingresados","error")}resetForm(r=!0){this.formUsuario.reset(),this.formUsuario.controls.rol.setValue("Administrador"),r&&this.resetAlertas()}cancelarForm(){this.router.navigate(["/proyecto/listado"])}resetAlertas(){this.alertas=[]}generarAlerta(r,o){this.alertas.push("error"===o?{mensaje:r,cerrable:!0,tipo:"danger"}:{mensaje:r,cerrable:!0,tipo:"success"})}}return r.\u0275fac=function(o){return new(o||r)(d.Y36(c.gz),d.Y36(c.F0),d.Y36(f))},r.\u0275cmp=d.Xpm({type:r,selectors:[["ng-component"]],decls:61,vars:25,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-sm-6"],["class","font-weight-bold",4,"ngFor","ngForOf"],[1,"col-sm-6","col-lg-6"],[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup"],[1,"form-group"],["for","nombre",1,"mt-2"],["type","text","formControlName","nombre","id","nombre","placeholder","Ingresa el nombre","required",""],["class","invalid-feedback",4,"ngIf"],["for","apellido",1,"mt-2"],["type","text","formControlName","apellido","id","apellido","placeholder","Ingresa el apellido","required",""],["for","nombreUsuario",1,"mt-2"],["type","text","formControlName","nombreUsuario","id","nombreUsuario","placeholder","Ingresa el nombre de usuario","required",""],["for","rol",1,"mt-2"],["id","rol","formControlName","rol","required",""],["for","correoElectronico",1,"mt-2"],["type","email","formControlName","correoElectronico","id","correoElectronico","placeholder","Ingresa el correo electr\xf3nico","required",""],["for","contrasena",1,"mt-2"],["type","password","formControlName","contrasena","id","contrasena","placeholder","Ingresa la contrase\xf1a","required",""],["for","confirmarContrasena",1,"mt-2"],["type","password","formControlName","confirmarContrasena","id","confirmarContrasena","placeholder","Ingresa la confirmaci\xf3n de la contrase\xf1a","required",""],["class","form-group",4,"ngIf"],[1,"card-footer","d-flex","flex-row","justify-content-end"],["type","submit",1,"btn","btn-md","btn-primary","mr-2",3,"disabled","click"],[1,"fa","fa-save","mr-1"],["type","reset",1,"btn","btn-md","btn-danger",3,"click"],[1,"fa","fa-remove","mr-1"],[1,"font-weight-bold"],[3,"type","dismissible"],[1,"fa","fa-exclamation-circle","mr-1"],[1,"invalid-feedback"],["for","costoPorHora",1,"mt-2"],["type","number","min","1","formControlName","costoPorHora","id","costoPorHora","placeholder","Ingresa el costo por hora","required",""]],template:function(r,o){1&r&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.YNc(3,p,4,3,"div",3),d.qZA(),d.qZA(),d.TgZ(4,"div",1),d.TgZ(5,"div",4),d.TgZ(6,"div",5),d.TgZ(7,"div",6),d.TgZ(8,"h5"),d._uU(9,"Crear Usuario"),d.qZA(),d.qZA(),d.TgZ(10,"div",7),d.TgZ(11,"form",8),d.TgZ(12,"div",9),d.TgZ(13,"label",10),d._uU(14,"Nombre (*)"),d.qZA(),d._UZ(15,"input",11),d.YNc(16,g,2,0,"div",12),d.qZA(),d.TgZ(17,"div",9),d.TgZ(18,"label",13),d._uU(19,"Apellido (*)"),d.qZA(),d._UZ(20,"input",14),d.YNc(21,Z,2,0,"div",12),d.qZA(),d.TgZ(22,"div",9),d.TgZ(23,"label",15),d._uU(24,"Nombre de usuario (*)"),d.qZA(),d._UZ(25,"input",16),d.YNc(26,v,2,0,"div",12),d.qZA(),d.TgZ(27,"div",9),d.TgZ(28,"label",17),d._uU(29,"Rol (*)"),d.qZA(),d.TgZ(30,"select",18),d.TgZ(31,"option"),d._uU(32,"Administrador"),d.qZA(),d.TgZ(33,"option"),d._uU(34,"Desarrollador"),d.qZA(),d.TgZ(35,"option"),d._uU(36,"Tester"),d.qZA(),d.qZA(),d.YNc(37,U,2,0,"div",12),d.qZA(),d.TgZ(38,"div",9),d.TgZ(39,"label",19),d._uU(40,"Correo electr\xf3nico (*)"),d.qZA(),d._UZ(41,"input",20),d.YNc(42,b,2,0,"div",12),d.qZA(),d.TgZ(43,"div",9),d.TgZ(44,"label",21),d._uU(45,"Contrase\xf1a (*)"),d.qZA(),d._UZ(46,"input",22),d.YNc(47,h,2,0,"div",12),d.qZA(),d.TgZ(48,"div",9),d.TgZ(49,"label",23),d._uU(50,"Confirmar contrase\xf1a (*)"),d.qZA(),d._UZ(51,"input",24),d.YNc(52,A,2,0,"div",12),d.qZA(),d.YNc(53,T,5,3,"div",25),d.qZA(),d.qZA(),d.TgZ(54,"div",26),d.TgZ(55,"button",27),d.NdJ("click",function(){return o.enviarForm()}),d._UZ(56,"i",28),d._uU(57,"Guardar "),d.qZA(),d.TgZ(58,"button",29),d.NdJ("click",function(){return o.cancelarForm()}),d._UZ(59,"i",30),d._uU(60,"Cancelar "),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&r&&(d.xp6(3),d.Q6J("ngForOf",o.alertas),d.xp6(8),d.Q6J("formGroup",o.formUsuario),d.xp6(4),d.Tol(!o.formUsuario.controls.nombre.valid&&o.formUsuario.controls.nombre.dirty?"form-control is-invalid":"form-control"),d.xp6(1),d.Q6J("ngIf",!o.formUsuario.controls.nombre.valid&&o.formUsuario.controls.nombre.dirty),d.xp6(4),d.Tol(!o.formUsuario.controls.apellido.valid&&o.formUsuario.controls.apellido.dirty?"form-control is-invalid":"form-control"),d.xp6(1),d.Q6J("ngIf",!o.formUsuario.controls.apellido.valid&&o.formUsuario.controls.apellido.dirty),d.xp6(4),d.Tol(!o.formUsuario.controls.nombreUsuario.valid&&o.formUsuario.controls.nombreUsuario.dirty?"form-control is-invalid":"form-control"),d.xp6(1),d.Q6J("ngIf",!o.formUsuario.controls.nombreUsuario.valid&&o.formUsuario.controls.nombreUsuario.dirty),d.xp6(4),d.Tol(o.formUsuario.controls.rol.valid?"form-control":"form-control is-invalid"),d.xp6(7),d.Q6J("ngIf",!o.formUsuario.controls.rol.valid&&o.formUsuario.controls.rol.dirty),d.xp6(4),d.Tol(!o.formUsuario.controls.correoElectronico.valid&&o.formUsuario.controls.correoElectronico.dirty?"form-control is-invalid":"form-control"),d.xp6(1),d.Q6J("ngIf",!o.formUsuario.controls.correoElectronico.valid&&o.formUsuario.controls.correoElectronico.dirty),d.xp6(4),d.Tol(!o.formUsuario.controls.contrasena.valid&&o.formUsuario.controls.contrasena.dirty?"form-control is-invalid":"form-control"),d.xp6(1),d.Q6J("ngIf",!o.formUsuario.controls.contrasena.valid&&o.formUsuario.controls.contrasena.dirty),d.xp6(4),d.Tol(!o.formUsuario.controls.confirmarContrasena.valid&&o.formUsuario.controls.confirmarContrasena.dirty?"form-control is-invalid":"form-control"),d.xp6(1),d.Q6J("ngIf",!o.formUsuario.controls.confirmarContrasena.valid&&o.formUsuario.controls.confirmarContrasena.dirty),d.xp6(1),d.Q6J("ngIf","Administrador"!==o.formUsuario.controls.rol.value),d.xp6(2),d.Q6J("disabled",o.formUsuario.invalid))},directives:[i.sg,t._Y,t.JL,t.sg,t.Fj,t.JJ,t.u,t.Q7,i.O5,t.EJ,t.YN,t.Kr,n.wx,t.qQ,t.wV],encapsulation:2}),r})()},{path:"consulta",data:{title:"Consulta"},component:(()=>{class r{constructor(r,o,e){this.route=r,this.router=o,this._usuarioService=e,this.formUsuario=new t.cw({correoElectronico:new t.NI("",[t.kI.required,t.kI.email])}),this.alertas=[]}ngOnDestroy(){this.subscripcionCrear&&this.subscripcionCrear.unsubscribe()}enviarForm(){if(this.resetAlertas(),this.formUsuario.valid){const r=this.formUsuario.value.correoElectronico;this.subscripcionCrear=this._usuarioService.obtenerBugsResueltosPorUsuario(r).subscribe(o=>{o.exito&&(201===o.codigoEstado||200===o.codigoEstado)&&(this.resetForm(!1),this.generarAlerta(`El usuario ${r} resolvi\xf3 ${o.resultado} bugs`,"exito"))},r=>{this.generarAlerta(r.error&&r.error.Mensaje?r.error.Mensaje:"Ha ocurrido un error inesperado","error")})}else this.generarAlerta("Por favor, revisa los campos ingresados","error")}resetForm(r=!0){this.formUsuario.reset(),r&&this.resetAlertas()}cancelarForm(){this.router.navigate(["/proyecto/listado"])}resetAlertas(){this.alertas=[]}generarAlerta(r,o){this.alertas.push("error"===o?{mensaje:r,cerrable:!0,tipo:"danger"}:"success"===o?{mensaje:r,cerrable:!0,tipo:"success"}:{mensaje:r,cerrable:!0,tipo:"info"})}}return r.\u0275fac=function(o){return new(o||r)(d.Y36(c.gz),d.Y36(c.F0),d.Y36(f))},r.\u0275cmp=d.Xpm({type:r,selectors:[["ng-component"]],decls:24,vars:6,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-sm-6"],["class","font-weight-bold",4,"ngFor","ngForOf"],[1,"col-sm-6","col-lg-6"],[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup"],[1,"form-group"],["for","correoElectronico",1,"mt-2"],["type","email","formControlName","correoElectronico","id","correoElectronico","placeholder","Ingresa el correo electr\xf3nico","required",""],["class","invalid-feedback",4,"ngIf"],[1,"card-footer","d-flex","flex-row","justify-content-end"],["type","submit",1,"btn","btn-md","btn-primary","mr-2",3,"disabled","click"],[1,"fa","fa-save","mr-1"],["type","reset",1,"btn","btn-md","btn-danger",3,"click"],[1,"fa","fa-remove","mr-1"],[1,"font-weight-bold"],[3,"type","dismissible"],[1,"fa","fa-exclamation-circle","mr-1"],[1,"invalid-feedback"]],template:function(r,o){1&r&&(d.TgZ(0,"div",0),d.TgZ(1,"div",1),d.TgZ(2,"div",2),d.YNc(3,_,4,3,"div",3),d.qZA(),d.qZA(),d.TgZ(4,"div",1),d.TgZ(5,"div",4),d.TgZ(6,"div",5),d.TgZ(7,"div",6),d.TgZ(8,"h5"),d._uU(9,"Cantidad de Bugs por Usuario"),d.qZA(),d.qZA(),d.TgZ(10,"div",7),d.TgZ(11,"form",8),d.TgZ(12,"div",9),d.TgZ(13,"label",10),d._uU(14,"Correo electr\xf3nico (*)"),d.qZA(),d._UZ(15,"input",11),d.YNc(16,I,2,0,"div",12),d.qZA(),d.qZA(),d.qZA(),d.TgZ(17,"div",13),d.TgZ(18,"button",14),d.NdJ("click",function(){return o.enviarForm()}),d._UZ(19,"i",15),d._uU(20,"Guardar "),d.qZA(),d.TgZ(21,"button",16),d.NdJ("click",function(){return o.cancelarForm()}),d._UZ(22,"i",17),d._uU(23,"Cancelar "),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&r&&(d.xp6(3),d.Q6J("ngForOf",o.alertas),d.xp6(8),d.Q6J("formGroup",o.formUsuario),d.xp6(4),d.Tol(!o.formUsuario.controls.correoElectronico.valid&&o.formUsuario.controls.correoElectronico.dirty?"form-control is-invalid":"form-control"),d.xp6(1),d.Q6J("ngIf",!o.formUsuario.controls.correoElectronico.valid&&o.formUsuario.controls.correoElectronico.dirty),d.xp6(2),d.Q6J("disabled",o.formUsuario.invalid))},directives:[i.sg,t._Y,t.JL,t.sg,t.Fj,t.JJ,t.u,t.Q7,i.O5,n.wx],encapsulation:2}),r})()}]}];let x=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=d.oAB({type:r}),r.\u0275inj=d.cJS({imports:[[c.Bz.forChild(y)],c.Bz]}),r})(),C=(()=>{class r{}return r.\u0275fac=function(o){return new(o||r)},r.\u0275mod=d.oAB({type:r}),r.\u0275inj=d.cJS({imports:[[i.ez,t.UX,t.u5,x,a.Fq.forRoot(),n.nM.forRoot(),s.zk.forRoot(),t.UX]]}),r})()}}]);