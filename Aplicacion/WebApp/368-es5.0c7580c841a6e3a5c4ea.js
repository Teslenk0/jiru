!function(){"use strict";function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkjiru_webapp=self.webpackChunkjiru_webapp||[]).push([[368],{53368:function(t,i,n){n.r(i),n.d(i,{ImportacionModule:function(){return P}});var r,s=n(12057),a=n(23738),l=n(37911),c=n(23419),p=n(6282),u=n(60793),d=n(44553),f=n(64762),h=n(93856),m=n(45424),g=n(38634),v=["*"],b=((r=function t(){o(this,t),this.adaptivePosition=!0,this.placement="top",this.triggers="hover focus",this.delay=0}).\u0275fac=function(t){return new(t||r)},r.\u0275prov=(0,u.Yz7)({factory:function(){return new r},token:r,providedIn:"root"}),r),y=function(){var t=function(){function t(e){o(this,t),Object.assign(this,e)}return e(t,[{key:"isBs3",get:function(){return(0,d.XA)()}},{key:"ngAfterViewInit",value:function(){this.classMap={in:!1,fade:!1},this.classMap[this.placement]=!0,this.classMap["tooltip-".concat(this.placement)]=!0,this.classMap.in=!0,this.animation&&(this.classMap.fade=!0),this.containerClass&&(this.classMap[this.containerClass]=!0)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.Y36(b))},t.\u0275cmp=u.Xpm({type:t,selectors:[["bs-tooltip-container"]],hostAttrs:["role","tooltip"],hostVars:7,hostBindings:function(t,e){2&t&&(u.uIk("id",e.id),u.Tol("tooltip in tooltip-"+e.placement+" bs-tooltip-"+e.placement+" "+e.placement+" "+e.containerClass),u.ekj("show",!e.isBs3)("bs3",e.isBs3))},ngContentSelectors:v,decls:3,vars:0,consts:[[1,"tooltip-arrow","arrow"],[1,"tooltip-inner"]],template:function(t,e){1&t&&(u.F$t(),u._UZ(0,"div",0),u.TgZ(1,"div",1),u.Hsn(2),u.qZA())},styles:[".tooltip[_nghost-%COMP%] {\n      display: block;\n      pointer-events: none;\n    }\n    .bs3.tooltip.top[_nghost-%COMP%] > .arrow[_ngcontent-%COMP%] {\n      margin-left: -2px;\n    }\n    .bs3.tooltip.bottom[_nghost-%COMP%] {\n      margin-top: 0px;\n    }\n    .bs3.bs-tooltip-left[_nghost-%COMP%], .bs3.bs-tooltip-right[_nghost-%COMP%]{\n      margin: 0px;\n    }\n    .bs3.bs-tooltip-right[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%], .bs3.bs-tooltip-left[_nghost-%COMP%]   .arrow[_ngcontent-%COMP%] {\n      margin: .3rem 0;\n    }"],changeDetection:0}),t}(),_=0,Z=function(){var t=function(){function t(e,i,n,r,s,a){o(this,t),this._elementRef=r,this._renderer=s,this._positionService=a,this.tooltipId=_++,this.tooltipChange=new u.vpe,this.containerClass="",this.tooltipAnimation=!0,this.tooltipFadeDuration=150,this.tooltipStateChanged=new u.vpe,this._tooltip=i.createLoader(this._elementRef,e,this._renderer).provide({provide:b,useValue:n}),Object.assign(this,n),this.onShown=this._tooltip.onShown,this.onHidden=this._tooltip.onHidden}return e(t,[{key:"isOpen",get:function(){return this._tooltip.isShown},set:function(t){t?this.show():this.hide()}},{key:"htmlContent",set:function(t){(0,d.O4)("tooltipHtml was deprecated, please use `tooltip` instead"),this.tooltip=t}},{key:"_placement",set:function(t){(0,d.O4)("tooltipPlacement was deprecated, please use `placement` instead"),this.placement=t}},{key:"_isOpen",get:function(){return(0,d.O4)("tooltipIsOpen was deprecated, please use `isOpen` instead"),this.isOpen},set:function(t){(0,d.O4)("tooltipIsOpen was deprecated, please use `isOpen` instead"),this.isOpen=t}},{key:"_enable",get:function(){return(0,d.O4)("tooltipEnable was deprecated, please use `isDisabled` instead"),this.isDisabled},set:function(t){(0,d.O4)("tooltipEnable was deprecated, please use `isDisabled` instead"),this.isDisabled=!t}},{key:"_appendToBody",get:function(){return(0,d.O4)('tooltipAppendToBody was deprecated, please use `container="body"` instead'),"body"===this.container},set:function(t){(0,d.O4)('tooltipAppendToBody was deprecated, please use `container="body"` instead'),this.container=t?"body":this.container}},{key:"_popupClass",set:function(t){(0,d.O4)("tooltipClass deprecated")}},{key:"_tooltipContext",set:function(t){(0,d.O4)("tooltipContext deprecated")}},{key:"_tooltipPopupDelay",set:function(t){(0,d.O4)("tooltipPopupDelay is deprecated, use `delay` instead"),this.delay=t}},{key:"_tooltipTrigger",get:function(){return(0,d.O4)("tooltipTrigger was deprecated, please use `triggers` instead"),this.triggers},set:function(t){(0,d.O4)("tooltipTrigger was deprecated, please use `triggers` instead"),this.triggers=(t||"").toString()}},{key:"ngOnInit",value:function(){var t=this;this._tooltip.listen({triggers:this.triggers,show:function(){return t.show()}}),this.tooltipChange.subscribe(function(e){e||t._tooltip.hide()}),this.onShown.subscribe(function(){t.setAriaDescribedBy()}),this.onHidden.subscribe(function(){t.setAriaDescribedBy()})}},{key:"setAriaDescribedBy",value:function(){this._ariaDescribedby=this.isOpen?"tooltip-".concat(this.tooltipId):null,this._ariaDescribedby?this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ariaDescribedby):this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby")}},{key:"toggle",value:function(){if(this.isOpen)return this.hide();this.show()}},{key:"show",value:function(){var t=this;if(this._positionService.setOptions({modifiers:{flip:{enabled:this.adaptivePosition},preventOverflow:{enabled:this.adaptivePosition}}}),!(this.isOpen||this.isDisabled||this._delayTimeoutId)&&this.tooltip){var e=function(){t._delayTimeoutId&&(t._delayTimeoutId=void 0),t._tooltip.attach(y).to(t.container).position({attachment:t.placement}).show({content:t.tooltip,placement:t.placement,containerClass:t.containerClass,id:"tooltip-".concat(t.tooltipId)})},o=function(){t._tooltipCancelShowFn&&t._tooltipCancelShowFn()};this.delay?(this._delaySubscription&&this._delaySubscription.unsubscribe(),this._delaySubscription=(0,g.H)(this.delay).subscribe(function(){e(),o()}),this.triggers&&(0,d.AL)(this.triggers).forEach(function(e){t._tooltipCancelShowFn=t._renderer.listen(t._elementRef.nativeElement,e.close,function(){t._delaySubscription.unsubscribe(),o()})})):e()}}},{key:"hide",value:function(){var t=this;this._delayTimeoutId&&(clearTimeout(this._delayTimeoutId),this._delayTimeoutId=void 0),this._tooltip.isShown&&(this._tooltip.instance.classMap.in=!1,setTimeout(function(){t._tooltip.hide()},this.tooltipFadeDuration))}},{key:"ngOnDestroy",value:function(){this._tooltip.dispose(),this.tooltipChange.unsubscribe(),this._delaySubscription&&this._delaySubscription.unsubscribe(),this.onShown.unsubscribe(),this.onHidden.unsubscribe()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.Y36(u.s_b),u.Y36(h.oj),u.Y36(b),u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(m.sA))},t.\u0275dir=u.lG2({type:t,selectors:[["","tooltip",""],["","tooltipHtml",""]],inputs:{containerClass:"containerClass",tooltipAnimation:"tooltipAnimation",tooltipFadeDuration:"tooltipFadeDuration",isOpen:"isOpen",htmlContent:["tooltipHtml","htmlContent"],tooltip:"tooltip",_placement:["tooltipPlacement","_placement"],placement:"placement",_isOpen:["tooltipIsOpen","_isOpen"],_enable:["tooltipEnable","_enable"],isDisabled:"isDisabled",_appendToBody:["tooltipAppendToBody","_appendToBody"],container:"container",_popupClass:["tooltipClass","_popupClass"],_tooltipContext:["tooltipContext","_tooltipContext"],_tooltipPopupDelay:["tooltipPopupDelay","_tooltipPopupDelay"],delay:"delay",_tooltipTrigger:["tooltipTrigger","_tooltipTrigger"],triggers:"triggers",adaptivePosition:"adaptivePosition"},outputs:{tooltipChange:"tooltipChange",tooltipStateChanged:"tooltipStateChanged",onShown:"onShown",onHidden:"onHidden"},exportAs:["bs-tooltip"]}),(0,f.gn)([(0,d.GU)(),(0,f.w6)("design:type",Object)],t.prototype,"tooltip",void 0),t}(),A=function(){var t=function(){function t(){o(this,t)}return e(t,null,[{key:"forRoot",value:function(){return{ngModule:t,providers:[h.oj,m.sA]}}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[s.ez]]}),t}(),w=n(95859),O=n(88002),C=n(92340),T=n(58497),k=function(){var t=function t(e){var i=this;o(this,t),this._httpClient=e,this.obtenerImportadoresDisponibles=function(){return i._httpClient.get("".concat(i.apiUrl,"/importacion/disponible")).pipe((0,O.U)(function(t){return t}))},this.importarBugs=function(t){return i._httpClient.post("".concat(i.apiUrl,"/importacion"),t).pipe((0,O.U)(function(t){return t}))},this.apiUrl=C.N.apiUrl};return t.\u0275fac=function(e){return new(e||t)(u.LFG(T.eN))},t.\u0275prov=u.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}();function I(t,e){if(1&t&&(u.TgZ(0,"div",25),u.TgZ(1,"alert",26),u._UZ(2,"i",27),u._uU(3),u.qZA(),u.qZA()),2&t){var o=e.$implicit;u.xp6(1),u.Q6J("type",o.tipo)("dismissible",o.cerrable),u.xp6(2),u.Oqu(o.mensaje)}}function q(t,e){if(1&t&&(u.TgZ(0,"option"),u._uU(1),u.qZA()),2&t){var o=e.$implicit;u.xp6(1),u.Oqu(o.nombre)}}function x(t,e){1&t&&(u.TgZ(0,"div",28),u._uU(1," Selecciona un proveedor v\xe1lido "),u.qZA())}function S(t,e){if(1&t){var o=u.EpF();u.TgZ(0,"div"),u.TgZ(1,"div",29),u.TgZ(2,"div",30),u.TgZ(3,"div",31),u._UZ(4,"input",32),u.qZA(),u.TgZ(5,"div",33),u._UZ(6,"input",34),u.qZA(),u.TgZ(7,"div",35),u.TgZ(8,"i",36),u.NdJ("click",function(t){var e=u.CHM(o).index;return u.oxw().quitarParametro(t,e)}),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()}if(2&t){var i=e.index;u.xp6(2),u.Q6J("formGroupName",i),u.xp6(2),u.Q6J("id","clave-parametro-"+i),u.xp6(2),u.Q6J("id","valor-parametro-"+i)}}var U=[{path:"",data:{title:"Importacion"},children:[{path:"bug",data:{title:"Bug"},component:function(){var t=function(){function t(e,i,n,r){o(this,t),this.formBuilder=e,this.router=i,this.route=n,this._importacionService=r,this.formImportacion=this.formBuilder.group({proveedor:["default",[a.kI.required]],correoUsuarioResuelve:["",[a.kI.required,a.kI.email]],parametros:this.formBuilder.array([this.formBuilder.group({clave:["",[]],valor:["",[]]})])}),this.alertas=[]}return e(t,[{key:"ngOnInit",value:function(){this.obtenerImportadores()}},{key:"ngOnDestroy",value:function(){this.subscripcionImportar&&this.subscripcionImportar.unsubscribe(),this.subscripcionForm&&this.subscripcionForm.unsubscribe(),this.subscripcionObtenerImportadores&&this.subscripcionObtenerImportadores.unsubscribe()}},{key:"parametros",get:function(){return this.formImportacion.get("parametros")}},{key:"obtenerImportadores",value:function(){var t=this;this.subscripcionObtenerImportadores=this._importacionService.obtenerImportadoresDisponibles().pipe().subscribe(function(e){t.importadores=e.resultado})}},{key:"agregarParametro",value:function(t){t.preventDefault(),this.parametros.push(this.formBuilder.group({clave:["",[]],valor:["",[]]}))}},{key:"quitarParametro",value:function(t,e){t.preventDefault(),this.parametros.removeAt(e)}},{key:"enviarForm",value:function(){var t=this;if(this.resetAlertas(),this.formImportacion.valid){var e=this.formImportacion.value,o={};e.parametros.forEach(function(t){return o[t.clave.replace(" ","_")]=t.valor}),e.parametros=Object.assign(Object.assign({},o),{correoUsuarioResuelve:e.correoUsuarioResuelve}),this.subscripcionImportar=this._importacionService.importarBugs(e).subscribe(function(e){e.exito&&(201===e.codigoEstado||200===e.codigoEstado)&&(t.resetForm(!1),t.generarAlerta(e.mensaje,"exito"))},function(e){t.generarAlerta(e.error&&e.error.Mensaje?e.error.Mensaje:"Ha ocurrido un error inesperado","error")})}else this.generarAlerta("Por favor, revisa los campos ingresados","error")}},{key:"resetForm",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.formImportacion.reset(),this.formImportacion.controls.proveedor.setValue("default"),t&&this.resetAlertas()}},{key:"cancelarForm",value:function(){this.router.navigate(["/bug/listado"])}},{key:"resetAlertas",value:function(){this.alertas=[]}},{key:"generarAlerta",value:function(t,e){this.alertas.push("error"===e?{mensaje:t,cerrable:!0,tipo:"danger"}:{mensaje:t,cerrable:!0,tipo:"success"})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u.Y36(a.qu),u.Y36(w.F0),u.Y36(w.gz),u.Y36(k))},t.\u0275cmp=u.Xpm({type:t,selectors:[["ng-component"]],decls:36,vars:8,consts:[[1,"animated","fadeIn"],[1,"row"],[1,"col-sm-6"],["class","font-weight-bold",4,"ngFor","ngForOf"],[1,"col-sm-6","col-lg-6"],[1,"card"],[1,"card-header"],[1,"card-body"],[3,"formGroup"],["for","proveedor",1,"mt-2"],["id","proveedor","formControlName","proveedor","required",""],["value","default"],[4,"ngFor","ngForOf"],["class","invalid-feedback",4,"ngIf"],["for","correoUsuarioResuelve",1,"mt-2"],["tooltip","Este correo electr\xf3nico se necesita para los bugs que est\xe1n marcados como resueltos en el archivo a importar, as\xed se puede calcular el costo.",1,"text-primary","fa","fa-question-circle-o","mr-1"],["type","text","formControlName","correoUsuarioResuelve","id","correoUsuarioResuelve","placeholder","Ingresa el correo del desarrollador","required","",1,"form-control"],["for","parametros",1,"mt-2","d-flex","justify-content-between"],["tooltip","Agregar nuevo par\xe1metro que desees enviar al importador. Los espacios en las claves ser\xe1n convertidos a '_'",1,"fa","fa-plus","font-xl","text-primary","cursor-pointer",3,"click"],["formArrayName","parametros"],[1,"card-footer","d-flex","flex-row","justify-content-end"],["type","submit",1,"btn","btn-md","btn-primary","mr-2",3,"disabled","click"],[1,"fa","fa-save","mr-1"],["type","reset",1,"btn","btn-md","btn-danger",3,"click"],[1,"fa","fa-remove","mr-1"],[1,"font-weight-bold"],[3,"type","dismissible"],[1,"fa","fa-exclamation-circle","mr-1"],[1,"invalid-feedback"],[1,"d-flex","flex-column","mt-2"],[1,"row",3,"formGroupName"],[1,"col-md-5"],["type","text","formControlName","clave","placeholder","Clave",1,"form-control",3,"id"],[1,"col-md-6"],["type","text","formControlName","valor","placeholder","Valor",1,"form-control",3,"id"],[1,"col-md-1","d-flex","justify-content-center","align-items-center"],["tooltip","Quitar par\xe1metro",1,"fa","fa-remove","font-xl","text-danger","cursor-pointer",3,"click"]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.YNc(3,I,4,3,"div",3),u.qZA(),u.qZA(),u.TgZ(4,"div",1),u.TgZ(5,"div",4),u.TgZ(6,"div",5),u.TgZ(7,"div",6),u.TgZ(8,"h5"),u._uU(9,"Importar Bugs"),u.qZA(),u.qZA(),u.TgZ(10,"div",7),u.TgZ(11,"form",8),u.TgZ(12,"label",9),u._uU(13,"Proveedor (*)"),u.qZA(),u.TgZ(14,"select",10),u.TgZ(15,"option",11),u._uU(16,"Selecciona un proveedor"),u.qZA(),u.YNc(17,q,2,1,"option",12),u.qZA(),u.YNc(18,x,2,0,"div",13),u.TgZ(19,"label",14),u._UZ(20,"i",15),u._uU(21," Correo del Desarrollador (*) "),u.qZA(),u._UZ(22,"input",16),u.TgZ(23,"div"),u.TgZ(24,"label",17),u._uU(25," Par\xe1metros "),u.TgZ(26,"i",18),u.NdJ("click",function(t){return e.agregarParametro(t)}),u.qZA(),u.qZA(),u.TgZ(27,"div",19),u.YNc(28,S,9,3,"div",12),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.TgZ(29,"div",20),u.TgZ(30,"button",21),u.NdJ("click",function(){return e.enviarForm()}),u._UZ(31,"i",22),u._uU(32,"Guardar "),u.qZA(),u.TgZ(33,"button",23),u.NdJ("click",function(){return e.cancelarForm()}),u._UZ(34,"i",24),u._uU(35,"Cancelar "),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&t&&(u.xp6(3),u.Q6J("ngForOf",e.alertas),u.xp6(8),u.Q6J("formGroup",e.formImportacion),u.xp6(3),u.Tol(e.formImportacion.controls.proveedor.valid?"form-control":"form-control is-invalid"),u.xp6(3),u.Q6J("ngForOf",e.importadores),u.xp6(1),u.Q6J("ngIf",!e.formImportacion.controls.proveedor.valid&&e.formImportacion.controls.proveedor.dirty),u.xp6(10),u.Q6J("ngForOf",e.parametros.controls),u.xp6(2),u.Q6J("disabled",e.formImportacion.invalid))},directives:[s.sg,a._Y,a.JL,a.sg,a.EJ,a.JJ,a.u,a.Q7,a.YN,a.Kr,s.O5,Z,a.Fj,a.CE,c.wx,a.x0],encapsulation:2}),t}()}]}],D=function(){var t=function t(){o(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[w.Bz.forChild(U)],w.Bz]}),t}(),P=function(){var t=function t(){o(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=u.oAB({type:t}),t.\u0275inj=u.cJS({imports:[[s.ez,a.UX,a.u5,D,l.Fq.forRoot(),c.nM.forRoot(),p.zk.forRoot(),a.UX,A]]}),t}()}}])}();