<div class="animated fadeIn">
  <div class="row">
    <div class="col-sm-6">
      <div *ngFor="let alerta of alertas" class="font-weight-bold">
        <alert [type]="alerta.tipo" [dismissible]="alerta.cerrable"><i
          class="fa fa-exclamation-circle mr-1"></i>{{ alerta.mensaje }}</alert>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-6 col-lg-6">
      <div class="card">
        <div class="card-header">
          <h5>Crear Usuario</h5>
        </div>
        <div class="card-body">
          <form [formGroup]="formUsuario">
            <div class="form-group">
              <label class="mt-2" for="nombre">Nombre (*)</label>
              <input
                type="text"
                [class]="(!formUsuario.controls['nombre'].valid && formUsuario.controls['nombre'].dirty) ? 'form-control is-invalid' : 'form-control'"
                formControlName="nombre"
                id="nombre"
                placeholder="Ingresa el nombre"
                required
              />
              <div *ngIf="(!formUsuario.controls['nombre'].valid && formUsuario.controls['nombre'].dirty)"
                   class="invalid-feedback">
                Ingresa un nombre válido
              </div>
            </div>
            <div class="form-group">
              <label class="mt-2" for="apellido">Apellido (*)</label>
              <input
                type="text"
                [class]="(!formUsuario.controls['apellido'].valid && formUsuario.controls['apellido'].dirty) ? 'form-control is-invalid' : 'form-control'"
                formControlName="apellido"
                id="apellido"
                placeholder="Ingresa el apellido"
                required
              />
              <div *ngIf="(!formUsuario.controls['apellido'].valid && formUsuario.controls['apellido'].dirty)"
                   class="invalid-feedback">
                Ingresa un apellido válido
              </div>
            </div>
            <div class="form-group">
              <label class="mt-2" for="nombreUsuario">Nombre de usuario (*)</label>
              <input
                type="text"
                [class]="(!formUsuario.controls['nombreUsuario'].valid && formUsuario.controls['nombreUsuario'].dirty) ? 'form-control is-invalid' : 'form-control'"
                formControlName="nombreUsuario"
                id="nombreUsuario"
                placeholder="Ingresa el nombre de usuario"
                required
              />
              <div *ngIf="(!formUsuario.controls['nombreUsuario'].valid && formUsuario.controls['nombreUsuario'].dirty)"
                   class="invalid-feedback">
                Ingresa un nombre de usuario válido
              </div>
            </div>
            <div class="form-group">
              <label class="mt-2" for="rol">Rol (*)</label>
              <select
                [class]="!formUsuario.controls['rol'].valid ? 'form-control is-invalid' : 'form-control'"
                id="rol"
                formControlName="rol"
                required>
                <option>Administrador</option>
                <option>Desarrollador</option>
                <option>Tester</option>
              </select>
              <div *ngIf="(!formUsuario.controls['rol'].valid && formUsuario.controls['rol'].dirty)"
                   class="invalid-feedback">
                Ingresa un rol válido
              </div>
            </div>
            <div class="form-group">
              <label class="mt-2" for="correoElectronico">Correo electrónico (*)</label>
              <input
                type="email"
                [class]="(!formUsuario.controls['correoElectronico'].valid && formUsuario.controls['correoElectronico'].dirty) ? 'form-control is-invalid' : 'form-control'"
                formControlName="correoElectronico"
                id="correoElectronico"
                placeholder="Ingresa el correo electrónico"
                required
              />
              <div
                *ngIf="(!formUsuario.controls['correoElectronico'].valid && formUsuario.controls['correoElectronico'].dirty)"
                class="invalid-feedback">
                Ingresa un correo electrónico válido
              </div>
            </div>
            <div class="form-group">
              <label class="mt-2" for="contrasena">Contraseña (*)</label>
              <input
                type="password"
                [class]="(!formUsuario.controls['contrasena'].valid && formUsuario.controls['contrasena'].dirty) ? 'form-control is-invalid' : 'form-control'"
                formControlName="contrasena"
                id="contrasena"
                placeholder="Ingresa la contraseña"
                required
              />
              <div *ngIf="(!formUsuario.controls['contrasena'].valid && formUsuario.controls['contrasena'].dirty)"
                   class="invalid-feedback">
                La contraseña debe tener al menos 6 caracteres
              </div>
            </div>
            <div class="form-group">
              <label class="mt-2" for="confirmarContrasena">Confirmar contraseña (*)</label>
              <input
                type="password"
                [class]="(!formUsuario.controls['confirmarContrasena'].valid && formUsuario.controls['confirmarContrasena'].dirty) ? 'form-control is-invalid' : 'form-control'"
                formControlName="confirmarContrasena"
                id="confirmarContrasena"
                placeholder="Ingresa la confirmación de la contraseña"
                required
              />
              <div
                *ngIf="(!formUsuario.controls['confirmarContrasena'].valid && formUsuario.controls['confirmarContrasena'].dirty)"
                class="invalid-feedback">
                Las contraseñas no coinciden
              </div>
            </div>
            <div *ngIf="formUsuario.controls['rol'].value !== 'Administrador'" class="form-group">
              <label class="mt-2" for="costoPorHora">Costo
                por hora (*)</label>
              <input
                type="number"
                min="1"
                [class]="(!formUsuario.controls['costoPorHora'].valid && formUsuario.controls['costoPorHora'].dirty) ? 'form-control is-invalid' : 'form-control'"
                formControlName="costoPorHora"
                id="costoPorHora"
                placeholder="Ingresa el costo por hora"
                required
              />
              <div
                *ngIf="(!formUsuario.controls['costoPorHora'].valid && formUsuario.controls['costoPorHora'].dirty) && formUsuario.controls['rol'].value !== 'Administrador'"
                class="invalid-feedback">
                Ingresa un costo por hora mayor a 0
              </div>
            </div>
          </form>
        </div>
        <div class="card-footer d-flex flex-row justify-content-end">
          <button
            (click)="enviarForm()"
            type="submit"
            [disabled]="formUsuario.invalid"
            class="btn btn-md btn-primary mr-2"
          >
            <i class="fa fa-save mr-1"></i>Guardar
          </button>
          <button
            (click)="cancelarForm()"
            type="reset"
            class="btn btn-md btn-danger"
          >
            <i class="fa fa-remove mr-1"></i>Cancelar
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
